<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>TelegramBotPHP: TelegramBotPHP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TelegramBotPHP
   </div>
   <div id="projectbrief">A very simple PHP Telegram Bot API for sending messages</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">TelegramBotPHP </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://core.telegram.org/bots/api">![API](https://img.shields.io/badge/Telegram%20Bot%20API-November%2017%2C%202017-36ade1.svg)</a> </p>
<div class="image">
<img src="https://img.shields.io/badge/php-%3E%3D5.3-8892bf.svg"  alt="PHP"/>
</div>
 <div class="image">
<img src="https://img.shields.io/badge/cURL-required-green.svg"  alt="CURL"/>
</div>
<p><a href="https://packagist.org/packages/eleirbag89/telegrambotphp">![Total Downloads](https://poser.pugx.org/eleirbag89/telegrambotphp/downloads)</a> <a href="https://packagist.org/packages/eleirbag89/telegrambotphp">![License](https://poser.pugx.org/eleirbag89/telegrambotphp/license)</a> <a href="https://styleci.io/repos/38492095">![StyleCI](https://styleci.io/repos/38492095/shield?branch=master)</a></p>
<p>A very simple PHP <a href="https://core.telegram.org/bots">Telegram Bot API</a>. Compliant with the November 17, 2017 <a class="el" href="class_telegram.html">Telegram</a> Bot API update.</p>
<h2>Requirements </h2>
<ul>
<li>PHP &gt;= 5.3</li>
<li>Curl extension for PHP5 must be enabled.</li>
<li><a class="el" href="class_telegram.html">Telegram</a> API key, you can get one simply with <a href="https://core.telegram.org/bots#botfather"></a> with simple commands right after creating your bot.</li>
</ul>
<p>For the WebHook:</p>
<ul>
<li>An VALID SSL certificate (<a class="el" href="class_telegram.html">Telegram</a> API requires this). You can use <a href="https://www.cloudflare.com/ssl">Cloudflare's Free Flexible SSL</a> which crypts the web traffic from end user to their proxies if you're using CloudFlare DNS. Since the August 29 update you can use a self-signed ssl certificate.</li>
</ul>
<p>For the getUpdates(Long Polling):</p>
<ul>
<li>Some way to execute the script in order to serve messages (for example cronjob)</li>
</ul>
<h2>Download </h2>
<h4>Using Composer</h4>
<p>From your project directory, run: ``` composer require eleirbag89/telegrambotphp ``` or ``` php composer.phar require eleirbag89/telegrambotphp ``` Note: If you don't have Composer you can download it <a href="https://getcomposer.org/download/">HERE</a>.</p>
<h4>Using release archives</h4>
<p><a href="https://github.com/Eleirbag89/TelegramBotPHP/releases">https://github.com/Eleirbag89/TelegramBotPHP/releases</a></p>
<h4>Using Git</h4>
<p>From a project directory, run: ``` git clone <a href="https://github.com/Eleirbag89/TelegramBotPHP.git">https://github.com/Eleirbag89/TelegramBotPHP.git</a> ```</p>
<h2>Installation </h2>
<h4>Via Composer's autoloader</h4>
<p>After downloading by using Composer, you can include Composer's autoloader: ```php include (<b>DIR</b> . '/vendor/autoload.php');</p>
<p>$telegram = new <a class="el" href="class_telegram.html">Telegram</a>('YOUR TELEGRAM TOKEN HERE'); ```</p>
<h4>Via TelegramBotPHP class</h4>
<p>Copy Telegram.php into your server and include it in your new bot script: ```php include 'Telegram.php';</p>
<p>$telegram = new <a class="el" href="class_telegram.html">Telegram</a>('YOUR TELEGRAM TOKEN HERE'); ```</p>
<p>Note: To enable error log file, also copy TelegramErrorLogger.php in the same directory of Telegram.php file.</p>
<h2>Configuration (WebHook) </h2>
<p>Navigate to <a href="https://api.telegram.org/bot(BOT_TOKEN)/setWebhook?url=https://yoursite.com/your_update.php">https://api.telegram.org/bot(BOT_TOKEN)/setWebhook?url=https://yoursite.com/your_update.php</a> Or use the <a class="el" href="class_telegram.html">Telegram</a> class setWebhook method.</p>
<h2>Examples </h2>
<p>```php $telegram = new <a class="el" href="class_telegram.html">Telegram</a>('YOUR TELEGRAM TOKEN HERE');</p>
<p>$chat_id = $telegram-&gt;ChatID(); $content = array('chat_id' =&gt; $chat_id, 'text' =&gt; 'Test'); $telegram-&gt;sendMessage($content); ```</p>
<p>If you want to get some specific parameter from the <a class="el" href="class_telegram.html">Telegram</a> response: ```php $telegram = new <a class="el" href="class_telegram.html">Telegram</a>('YOUR TELEGRAM TOKEN HERE');</p>
<p>$result = $telegram-&gt;getData(); $text = $result['message'] ['text']; $chat_id = $result['message'] ['chat']['id']; $content = array('chat_id' =&gt; $chat_id, 'text' =&gt; 'Test'); $telegram-&gt;sendMessage($content); ```</p>
<p>To upload a Photo or some other files, you need to load it with CurlFile: ```php // Load a local file to upload. If is already on <a class="el" href="class_telegram.html">Telegram</a>'s Servers just pass the resource id $img = curl_file_create('test.png','image/png'); $content = array('chat_id' =&gt; $chat_id, 'photo' =&gt; $img ); $telegram-&gt;sendPhoto($content); ```</p>
<p>To download a file on the <a class="el" href="class_telegram.html">Telegram</a>'s servers ```php $file = $telegram-&gt;getFile($file_id); $telegram-&gt;downloadFile($file['result']['file_path'], './my_downloaded_file_on_local_server.png'); ```</p>
<p>See update.php or update cowsay.php for the complete example. If you wanna see the CowSay Bot in action <a href="https://telegram.me/cowmooobot">add it</a>.</p>
<p>If you want to use getUpdates instead of the WebHook you need to call the the <code>serveUpdate</code> function inside a for cycle. ```php $telegram = new <a class="el" href="class_telegram.html">Telegram</a>('YOUR TELEGRAM TOKEN HERE');</p>
<p>$req = $telegram-&gt;getUpdates();</p>
<p>for ($i = 0; $i &lt; $telegram-&gt; UpdateCount(); $i++) { // You NEED to call serveUpdate before accessing the values of message in <a class="el" href="class_telegram.html">Telegram</a> Class $telegram-&gt;serveUpdate($i); $text = $telegram-&gt;Text(); $chat_id = $telegram-&gt;ChatID();</p>
<p>if ($text == '/start') { $reply = 'Working'; $content = array('chat_id' =&gt; $chat_id, 'text' =&gt; $reply); $telegram-&gt;sendMessage($content); } // DO OTHER STUFF } ``` See getUpdates.php for the complete example.</p>
<h2>Functions </h2>
<p>For a complete and up-to-date functions documentation check <a href="http://eleirbag89.github.io/TelegramBotPHP/">http://eleirbag89.github.io/TelegramBotPHP/</a></p>
<h2>Build keyboards </h2>
<p><a class="el" href="class_telegram.html">Telegram</a>'s bots can have two different kind of keyboards: Inline and Reply. The InlineKeyboard is linked to a particular message, while the ReplyKeyboard is linked to the whole chat. They are both an array of array of buttons, which rapresent the rows and columns. For instance you can arrange a ReplyKeyboard like this: </p>
<div class="image">
<img src="https://picload.org/image/rilclcwr/replykeyboard.png"  alt="ReplyKeabordExample"/>
</div>
<p> using this code: ```php $option = array( //First row array($telegram-&gt;buildKeyboardButton("Button 1"), $telegram-&gt;buildKeyboardButton("Button 2")), //Second row array($telegram-&gt;buildKeyboardButton("Button 3"), $telegram-&gt;buildKeyboardButton("Button 4"), $telegram-&gt;buildKeyboardButton("Button 5")), //Third row array($telegram-&gt;buildKeyboardButton("Button 6")) ); $keyb = $telegram-&gt;buildKeyBoard($option, $onetime=false); $content = array('chat_id' =&gt; $chat_id, 'reply_markup' =&gt; $keyb, 'text' =&gt; "This is a Keyboard Test"); $telegram-&gt;sendMessage($content); ``` When a user click on the button, the button text is send back to the bot. For an InlineKeyboard it's pretty much the same (but you need to provide a valid URL or a Callback data) </p>
<div class="image">
<img src="https://picload.org/image/rilclcwa/replykeyboardinline.png"  alt="InlineKeabordExample"/>
</div>
<p> ```php $option = array( //First row array($telegram-&gt;buildInlineKeyBoardButton("Button 1", $url="http://link1.com"), $telegram-&gt;buildInlineKeyBoardButton("Button 2", $url="http://link2.com")), //Second row array($telegram-&gt;buildInlineKeyBoardButton("Button 3", $url="http://link3.com"), $telegram-&gt;buildInlineKeyBoardButton("Button 4", $url="http://link4.com"), $telegram-&gt;buildInlineKeyBoardButton("Button 5", $url="http://link5.com")), //Third row array($telegram-&gt;buildInlineKeyBoardButton("Button 6", $url="http://link6.com")) ); $keyb = $telegram-&gt;buildInlineKeyBoard($option); $content = array('chat_id' =&gt; $chat_id, 'reply_markup' =&gt; $keyb, 'text' =&gt; "This is a Keyboard Test"); $telegram-&gt;sendMessage($content); ``` This is the list of all the helper functions to make keyboards easily:</p>
<p>```php buildKeyBoard(array $options, $onetime=true, $resize=true, $selective=true) ``` Send a custom keyboard. $option is an array of array KeyboardButton. Check <a href="https://core.telegram.org/bots/api#replykeyboardmarkup">ReplyKeyBoardMarkUp</a> for more info.</p>
<p>```php buildInlineKeyBoard(array $inline_keyboard) ``` Send a custom keyboard. $inline_keyboard is an array of array InlineKeyboardButton. Check <a href="https://core.telegram.org/bots/api#inlinekeyboardmarkup">InlineKeyboardMarkup</a> for more info.</p>
<p>```php buildInlineKeyBoardButton($text, $url, $callback_data, $switch_inline_query) ``` Create an InlineKeyboardButton. Check <a href="https://core.telegram.org/bots/api#inlinekeyboardbutton">InlineKeyBoardButton</a> for more info.</p>
<p>```php buildKeyBoardButton($text, $url, $request_contact, $request_location) ``` Create a KeyboardButton. Check <a href="https://core.telegram.org/bots/api#keyboardbutton">KeyBoardButton</a> for more info.</p>
<p>```php buildKeyBoardHide($selective=true) ``` Hide a custom keyboard. Check <a href="https://core.telegram.org/bots/api#replykeyboardhide">ReplyKeyBoarHide</a> for more info.</p>
<p>```php buildForceReply($selective=true) ``` Show a Reply interface to the user. Check <a href="https://core.telegram.org/bots/api#forcereply">ForceReply</a> for more info.</p>
<h2>List of Bots using the library </h2>
<p>Let me know using this <a href="https://github.com/Eleirbag89/TelegramBotPHP/issues/80">Issue</a> if you have made a bot using this API, I will add it to this section.</p>
<ul>
<li><a href="https://t.me/iHarfBot">iHarfBot</a> - Lang: Persian/Farsi</li>
<li><a href="https://t.me/AsansorBot">AsansorBot</a> - Lang: Persian/Farsi</li>
<li><a href="https://t.me/IDPbot">IDPbot</a> - Lang: Persian/Farsi (Down as 14/10/2019)</li>
<li><a href="https://telegram.me/EvilInsultGeneratorBot">Evil Insult Generator</a> - Lang English/German</li>
<li><a href="https://telegram.me/ibelitbot">ibelitbot</a> -Lang Persian (Down as 14/10/2019)</li>
<li><a href="https://telegram.me/apollbot">Advanced Pools Bot</a> - Lang Italian/English(<a href="https://poeditor.com/join/project/NMAUjrAZ5f">Contribute</a>)</li>
<li><a href="https://telegram.me/Btn_Bot">Btn_Bot</a> - Lang pt-BR - Cria botões transparente para publicações.</li>
<li><a href="https://telegram.me/DiffSGLaPuntabot">DiffSGLaPuntabot</a> <a href="https://telegram.me/DiffGravinaCTbot">DiffGravinaCTbot</a> <a href="https://t.me/DiffAdranobot">DiffAdranobot</a> - Lang: it/Italian - Bots to handle Recycling in San Giovanni La Punta, Gravina and Adrano (OpenSource Template <a href="https://github.com/Gualty/BOTDifferenziata">https://github.com/Gualty/BOTDifferenziata</a>)</li>
<li><a href="https://t.me/CoReYe_PGO_bot">GoBot</a></li>
<li><a href="https://t.me/CoReYe_PGO_Raid_bot">RaidBot</a></li>
</ul>
<h2>Emoticons </h2>
<p>For a list of emoticons to use in your bot messages, please refer to the column Bytes of this table: <a href="http://apps.timwhitlock.info/emoji/tables/unicode">http://apps.timwhitlock.info/emoji/tables/unicode</a></p>
<h2>License </h2>
<p>This open-source software is distributed under the MIT License. See LICENSE.md</p>
<h2>Contributing </h2>
<p>All kinds of contributions are welcome - code, tests, documentation, bug reports, new features, etc...</p>
<ul>
<li>Send feedbacks.</li>
<li>Submit bug reports.</li>
<li>Write/Edit the documents.</li>
<li>Fix bugs or add new features.</li>
</ul>
<h2>Contact me </h2>
<p>You can contact me <a href="https://telegram.me/ggrillo">via Telegram</a> but if you have an issue please <a href="https://github.com/Eleirbag89/TelegramBotPHP/issues">open</a> one.</p>
<h2>Support me </h2>
<p>You can buy me a beer or two using <a href="https://paypal.me/eleirbag89">Paypal</a> or support me using Flattr.</p>
<p><a href="https://flattr.com/submit/auto?user_id=eleirbag89&amp;url=https://github.com/Eleirbag89/TelegramBotPHP&amp;title=TelegramBotPHP&amp;language=&amp;tags=github&amp;category=software">![Flattr this git repo](http://api.flattr.com/button/flattr-badge-large.png)</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
