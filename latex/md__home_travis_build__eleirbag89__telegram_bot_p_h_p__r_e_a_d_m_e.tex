\href{https://core.telegram.org/bots/api}{\tt !\mbox{[}A\-P\-I\mbox{]}(https\-://img.\-shields.\-io/badge/\-Telegram\%20\-Bot\%20\-A\-P\-I-\/\-August\%2023\%2\-C\%202017-\/36ade1.\-svg)}  

\href{https://packagist.org/packages/eleirbag89/telegrambotphp}{\tt !\mbox{[}Total Downloads\mbox{]}(https\-://poser.\-pugx.\-org/eleirbag89/telegrambotphp/downloads)} \href{https://packagist.org/packages/eleirbag89/telegrambotphp}{\tt !\mbox{[}License\mbox{]}(https\-://poser.\-pugx.\-org/eleirbag89/telegrambotphp/license)} \href{https://styleci.io/repos/38492095}{\tt !\mbox{[}Style\-C\-I\mbox{]}(https\-://styleci.\-io/repos/38492095/shield?branch=master)}

\begin{quotation}
A very simple P\-H\-P \href{https://core.telegram.org/bots}{\tt Telegram Bot A\-P\-I}. Compliant with the August 23, 2017 \hyperlink{class_telegram}{Telegram} Bot A\-P\-I update.

\end{quotation}


\subsection*{Requirements }


\begin{DoxyItemize}
\item P\-H\-P5
\item Curl for P\-H\-P5 must be enabled.
\item \hyperlink{class_telegram}{Telegram} A\-P\-I key, you can get one simply with \href{https://core.telegram.org/bots#botfather}{\tt } with simple commands right after creating your bot.
\end{DoxyItemize}

For the Web\-Hook\-:
\begin{DoxyItemize}
\item An S\-S\-L certificate (\hyperlink{class_telegram}{Telegram} A\-P\-I requires this). You can use \href{https://www.cloudflare.com/ssl}{\tt Cloudflare's Free Flexible S\-S\-L} which crypts the web traffic from end user to their proxies if you're using Cloud\-Flare D\-N\-S. Since the August 29 update you can use a self-\/signed ssl certificate.
\end{DoxyItemize}

For the Get\-Updates\-:
\begin{DoxyItemize}
\item Some way to execute the script in order to serve messages (for example cronjob)
\end{DoxyItemize}

\subsection*{Installation }


\begin{DoxyItemize}
\item Copy Telegram.\-php into your server and include it in your new bot script ```php include(\char`\"{}\-Telegram.\-php\char`\"{}); \$telegram = new \hyperlink{class_telegram}{Telegram}(\$bot\-\_\-token); ```
\item To enable error log file, also copy Telegram\-Error\-Logger.\-php in the same directory of Telegram.\-php file
\end{DoxyItemize}

\paragraph*{Using Composer}

From your project directory, run ``` composer require eleirbag89/telegrambotphp ```

\subsection*{Configuration (Web\-Hook) }

Navigate to \href{https://api.telegram.org/bot(BOT_TOKEN)/setWebhook?url=https://yoursite.com/your_update.php}{\tt https\-://api.\-telegram.\-org/bot(\-B\-O\-T\-\_\-\-T\-O\-K\-E\-N)/set\-Webhook?url=https\-://yoursite.\-com/your\-\_\-update.\-php} Or use the \hyperlink{class_telegram}{Telegram} class set\-Webhook method.

\subsection*{Examples }

```php \$telegram = new \hyperlink{class_telegram}{Telegram}(\$bot\-\_\-token); \$chat\-\_\-id = \$telegram-\/$>$Chat\-I\-D(); \$content = array('chat\-\_\-id' =$>$ \$chat\-\_\-id, 'text' =$>$ \char`\"{}\-Test\char`\"{}); \$telegram-\/$>$send\-Message(\$content); ```

If you want to get some specific parameter from the \hyperlink{class_telegram}{Telegram} response\-: ```php \$telegram = new \hyperlink{class_telegram}{Telegram}(\$bot\-\_\-token); \$result = \$telegram-\/$>$get\-Data(); \$text = \$result\mbox{[}\char`\"{}message\char`\"{}\mbox{]} \mbox{[}\char`\"{}text\char`\"{}\mbox{]}; \$chat\-\_\-id = \$result\mbox{[}\char`\"{}message\char`\"{}\mbox{]} \mbox{[}\char`\"{}chat\char`\"{}\mbox{]}\mbox{[}\char`\"{}id\char`\"{}\mbox{]}; \$content = array('chat\-\_\-id' =$>$ \$chat\-\_\-id, 'text' =$>$ \char`\"{}\-Test\char`\"{}); \$telegram-\/$>$send\-Message(\$content); ```

To upload a Photo or some other files, you need to load it with Curl\-File\-: ```php // Load a local file to upload. If is already on \hyperlink{class_telegram}{Telegram}'s Servers just pass the resource id \$img = curl\-\_\-file\-\_\-create('test.\-png','image/png'); \$content = array('chat\-\_\-id' =$>$ \$chat\-\_\-id, 'photo' =$>$ \$img ); \$telegram-\/$>$send\-Photo(\$content); ```

To download a file on the \hyperlink{class_telegram}{Telegram}'s servers ```php \$file = \$telegram-\/$>$get\-File(\$file\-\_\-id); \$telegram-\/$>$download\-File(\$file\mbox{[}\char`\"{}result\char`\"{}\mbox{]}\mbox{[}\char`\"{}file\-\_\-path\char`\"{}\mbox{]}, \char`\"{}./my\-\_\-downloaded\-\_\-file\-\_\-on\-\_\-local\-\_\-server.\-png\char`\"{}); ```

See update.\-php or update cowsay.\-php for the complete example. If you wanna see the Cow\-Say Bot in action \href{https://telegram.me/cowmooobot}{\tt add it}.

If you want to use Get\-Updates instead of the Web\-Hook you need to call the the {\ttfamily serve\-Update} function inside a for cycle. ```php \$req = \$telegram-\/$>$get\-Updates(); for (\$i = 0; \$i $<$ \$telegram-\/$>$ Update\-Count(); \$i++) \{ // You N\-E\-E\-D to call serve\-Update before accessing the values of message in \hyperlink{class_telegram}{Telegram} Class \$telegram-\/$>$serve\-Update(\$i); \$text = \$telegram-\/$>$Text(); \$chat\-\_\-id = \$telegram-\/$>$Chat\-I\-D();

if (\$text == \char`\"{}/start\char`\"{}) \{ \$reply = \char`\"{}\-Working\char`\"{}; \$content = array('chat\-\_\-id' =$>$ \$chat\-\_\-id, 'text' =$>$ \$reply); \$telegram-\/$>$send\-Message(\$content); \} // D\-O O\-T\-H\-E\-R S\-T\-U\-F\-F \} ``` See get\-Updates.\-php for the complete example.

\subsection*{Functions }

For a complete and up-\/to-\/date functions documentation check \href{http://eleirbag89.github.io/TelegramBotPHP/}{\tt http\-://eleirbag89.\-github.\-io/\-Telegram\-Bot\-P\-H\-P/}

\subsection*{Build keyboards }

\hyperlink{class_telegram}{Telegram}'s bots can have two different kind of keyboards\-: Inline and Reply. The Inline\-Keyboard is linked to a particular message, while the Reply\-Keyboard is linked to the whole chat. They are both an array of array of buttons, which rapresent the rows and columns. For instance you can arrange a Reply\-Keyboard like this\-:  using this code\-: ```php \$option = array( //\-First row array(\$telegram-\/$>$build\-Keyboard\-Button(\char`\"{}\-Button 1\char`\"{}), \$telegram-\/$>$build\-Keyboard\-Button(\char`\"{}\-Button 2\char`\"{})), //\-Second row array(\$telegram-\/$>$build\-Keyboard\-Button(\char`\"{}\-Button 3\char`\"{}), \$telegram-\/$>$build\-Keyboard\-Button(\char`\"{}\-Button 4\char`\"{}), \$telegram-\/$>$build\-Keyboard\-Button(\char`\"{}\-Button 5\char`\"{})), //\-Third row array(\$telegram-\/$>$build\-Keyboard\-Button(\char`\"{}\-Button 6\char`\"{})) ); \$keyb = \$telegram-\/$>$build\-Key\-Board(\$option, \$onetime=false); \$content = array('chat\-\_\-id' =$>$ \$chat\-\_\-id, 'reply\-\_\-markup' =$>$ \$keyb, 'text' =$>$ \char`\"{}\-This is a Keyboard Test\char`\"{}); \$telegram-\/$>$send\-Message(\$content); ``` When a user click on the button, the button text is send back to the bot. For an Inline\-Keyboard it's pretty much the same (but you need to provide a valid U\-R\-L or a Callback data)  ```php \$option = array( //\-First row array(\$telegram-\/$>$build\-Inline\-Key\-Board\-Button(\char`\"{}\-Button 1\char`\"{}, \$url=\char`\"{}http\-://link1.\-com\char`\"{}), \$telegram-\/$>$build\-Inline\-Key\-Board\-Button(\char`\"{}\-Button 2\char`\"{}, \$url=\char`\"{}http\-://link2.\-com\char`\"{})), //\-Second row array(\$telegram-\/$>$build\-Inline\-Key\-Board\-Button(\char`\"{}\-Button 3\char`\"{}, \$url=\char`\"{}http\-://link3.\-com\char`\"{}), \$telegram-\/$>$build\-Inline\-Key\-Board\-Button(\char`\"{}\-Button 4\char`\"{}, \$url=\char`\"{}http\-://link4.\-com\char`\"{}), \$telegram-\/$>$build\-Inline\-Key\-Board\-Button(\char`\"{}\-Button 5\char`\"{}, \$url=\char`\"{}http\-://link5.\-com\char`\"{})), //\-Third row array(\$telegram-\/$>$build\-Inline\-Key\-Board\-Button(\char`\"{}\-Button 6\char`\"{}, \$url=\char`\"{}http\-://link6.\-com\char`\"{})) ); \$keyb = \$telegram-\/$>$build\-Inline\-Key\-Board(\$option); \$content = array('chat\-\_\-id' =$>$ \$chat\-\_\-id, 'reply\-\_\-markup' =$>$ \$keyb, 'text' =$>$ \char`\"{}\-This is a Keyboard Test\char`\"{}); \$telegram-\/$>$send\-Message(\$content); ``` This is the list of all the helper functions to make keyboards easily\-:

```php build\-Key\-Board(array \$options, \$onetime=true, \$resize=true, \$selective=true) ``` Send a custom keyboard. \$option is an array of array Keyboard\-Button. Check \href{https://core.telegram.org/bots/api#replykeyboardmarkup}{\tt Reply\-Key\-Board\-Mark\-Up} for more info.

```php build\-Inline\-Key\-Board(array \$inline\-\_\-keyboard) ``` Send a custom keyboard. \$inline\-\_\-keyboard is an array of array Inline\-Keyboard\-Button. Check \href{https://core.telegram.org/bots/api#inlinekeyboardmarkup}{\tt Inline\-Keyboard\-Markup} for more info.

```php build\-Inline\-Key\-Board\-Button(\$text, \$url, \$callback\-\_\-data, \$switch\-\_\-inline\-\_\-query) ``` Create an Inline\-Keyboard\-Button. Check \href{https://core.telegram.org/bots/api#inlinekeyboardbutton}{\tt Inline\-Key\-Board\-Button} for more info.

```php build\-Key\-Board\-Button(\$text, \$url, \$request\-\_\-contact, \$request\-\_\-location) ``` Create a Keyboard\-Button. Check \href{https://core.telegram.org/bots/api#keyboardbutton}{\tt Key\-Board\-Button} for more info.

```php build\-Key\-Board\-Hide(\$selective=true) ``` Hide a custom keyboard. Check \href{https://core.telegram.org/bots/api#replykeyboardhide}{\tt Reply\-Key\-Boar\-Hide} for more info.

```php build\-Force\-Reply(\$selective=true) ``` Show a Reply interface to the user. Check \href{https://core.telegram.org/bots/api#forcereply}{\tt Force\-Reply} for more info.

\subsection*{List of Bots using the library }

Let me know using this \href{https://github.com/Eleirbag89/TelegramBotPHP/issues/80}{\tt Issue} if you have made a bot using this A\-P\-I, I will add it to this section.
\begin{DoxyItemize}
\item \href{https://telegram.me/notifyadbot}{\tt Notifyadbot} -\/ Lang \-: Persian/\-Farsi (Down as 16/09/17)
\item \href{https://telegram.me/Partners_shakibonline_bot}{\tt Partners\-\_\-shakibonline\-\_\-bot} -\/ Lang \-: Persian/\-Farsi (Down as 16/09/17)
\item \href{https://t.me/pishvazrobot}{\tt Pishvazrobot} -\/ Lang \-: Persian/\-Farsi -\/ the most comprehensive bot for searching and listening to more than 100,000 R\-B\-T sound for two most popular and famous mobile operator in iran -\/ M\-T\-N Irancell and Hamrahe Aval
\item \href{https://t.me/iHarfBot}{\tt i\-Harf\-Bot} -\/ Lang\-: Persian/\-Farsi
\item \href{https://t.me/AsansorBot}{\tt Asansor\-Bot} -\/ Lang\-: Persian/\-Farsi
\item \href{https://t.me/IDPbot}{\tt I\-D\-Pbot} -\/ Lang\-: Persian/\-Farsi
\item \href{https://telegram.me/EvilInsultGeneratorBot}{\tt Evil Insult Generator} -\/ Lang English/\-German
\end{DoxyItemize}

\subsection*{Emoticons }

For a list of emoticons to use in your bot messages, please refer to the column Bytes of this table\-: \href{http://apps.timwhitlock.info/emoji/tables/unicode}{\tt http\-://apps.\-timwhitlock.\-info/emoji/tables/unicode}

\subsection*{Contact me }

You can contact me \href{https://telegram.me/ggrillo}{\tt via Telegram} but if you have an issue please \href{https://github.com/Eleirbag89/TelegramBotPHP/issues}{\tt open} one.

\subsection*{Support me }

You can buy me a beer or two using \href{https://paypal.me/eleirbag89}{\tt Paypal} or support me using Flattr.

\href{https://flattr.com/submit/auto?user_id=eleirbag89&url=https://github.com/Eleirbag89/TelegramBotPHP&title=TelegramBotPHP&language=&tags=github&category=software}{\tt !\mbox{[}Flattr this git repo\mbox{]}(http\-://api.\-flattr.\-com/button/flattr-\/badge-\/large.\-png)} 