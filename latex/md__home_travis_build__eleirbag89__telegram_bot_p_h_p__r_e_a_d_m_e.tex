\href{https://core.telegram.org/bots/api}{\tt !\mbox{[}A\-P\-I\mbox{]}(https\-://img.\-shields.\-io/badge/\-Telegram\%20\-Bot\%20\-A\-P\-I-\/\-November\%2017\%2\-C\%202017-\/36ade1.\-svg)}  

\href{https://packagist.org/packages/eleirbag89/telegrambotphp}{\tt !\mbox{[}Total Downloads\mbox{]}(https\-://poser.\-pugx.\-org/eleirbag89/telegrambotphp/downloads)} \href{https://packagist.org/packages/eleirbag89/telegrambotphp}{\tt !\mbox{[}License\mbox{]}(https\-://poser.\-pugx.\-org/eleirbag89/telegrambotphp/license)} \href{https://styleci.io/repos/38492095}{\tt !\mbox{[}Style\-C\-I\mbox{]}(https\-://styleci.\-io/repos/38492095/shield?branch=master)}

A very simple P\-H\-P \href{https://core.telegram.org/bots}{\tt Telegram Bot A\-P\-I}. Compliant with the November 17, 2017 \hyperlink{class_telegram}{Telegram} Bot A\-P\-I update.

\subsection*{Requirements }


\begin{DoxyItemize}
\item P\-H\-P $>$= 5.\-3
\item Curl extension for P\-H\-P5 must be enabled.
\item \hyperlink{class_telegram}{Telegram} A\-P\-I key, you can get one simply with \href{https://core.telegram.org/bots#botfather}{\tt } with simple commands right after creating your bot.
\end{DoxyItemize}

For the Web\-Hook\-:
\begin{DoxyItemize}
\item An V\-A\-L\-I\-D S\-S\-L certificate (\hyperlink{class_telegram}{Telegram} A\-P\-I requires this). You can use \href{https://www.cloudflare.com/ssl}{\tt Cloudflare's Free Flexible S\-S\-L} which crypts the web traffic from end user to their proxies if you're using Cloud\-Flare D\-N\-S. Since the August 29 update you can use a self-\/signed ssl certificate.
\end{DoxyItemize}

For the get\-Updates(\-Long Polling)\-:
\begin{DoxyItemize}
\item Some way to execute the script in order to serve messages (for example cronjob)
\end{DoxyItemize}

\subsection*{Download }

\paragraph*{Using Composer}

From your project directory, run\-: ``` composer require eleirbag89/telegrambotphp ``` or ``` php composer.\-phar require eleirbag89/telegrambotphp ``` Note\-: If you don't have Composer you can download it \href{https://getcomposer.org/download/}{\tt H\-E\-R\-E}.

\paragraph*{Using release archives}

\href{https://github.com/Eleirbag89/TelegramBotPHP/releases}{\tt https\-://github.\-com/\-Eleirbag89/\-Telegram\-Bot\-P\-H\-P/releases}

\paragraph*{Using Git}

From a project directory, run\-: ``` git clone \href{https://github.com/Eleirbag89/TelegramBotPHP.git}{\tt https\-://github.\-com/\-Eleirbag89/\-Telegram\-Bot\-P\-H\-P.\-git} ```

\subsection*{Installation }

\paragraph*{Via Composer's autoloader}

After downloading by using Composer, you can include Composer's autoloader\-: ```php include ({\bfseries D\-I\-R} . '/vendor/autoload.php');

\$telegram = new \hyperlink{class_telegram}{Telegram}('Y\-O\-U\-R T\-E\-L\-E\-G\-R\-A\-M T\-O\-K\-E\-N H\-E\-R\-E'); ```

\paragraph*{Via Telegram\-Bot\-P\-H\-P class}

Copy Telegram.\-php into your server and include it in your new bot script\-: ```php include 'Telegram.\-php';

\$telegram = new \hyperlink{class_telegram}{Telegram}('Y\-O\-U\-R T\-E\-L\-E\-G\-R\-A\-M T\-O\-K\-E\-N H\-E\-R\-E'); ```

Note\-: To enable error log file, also copy Telegram\-Error\-Logger.\-php in the same directory of Telegram.\-php file.

\subsection*{Configuration (Web\-Hook) }

Navigate to \href{https://api.telegram.org/bot(BOT_TOKEN)/setWebhook?url=https://yoursite.com/your_update.php}{\tt https\-://api.\-telegram.\-org/bot(\-B\-O\-T\-\_\-\-T\-O\-K\-E\-N)/set\-Webhook?url=https\-://yoursite.\-com/your\-\_\-update.\-php} Or use the \hyperlink{class_telegram}{Telegram} class set\-Webhook method.

\subsection*{Examples }

```php \$telegram = new \hyperlink{class_telegram}{Telegram}('Y\-O\-U\-R T\-E\-L\-E\-G\-R\-A\-M T\-O\-K\-E\-N H\-E\-R\-E');

\$chat\-\_\-id = \$telegram-\/$>$Chat\-I\-D(); \$content = array('chat\-\_\-id' =$>$ \$chat\-\_\-id, 'text' =$>$ 'Test'); \$telegram-\/$>$send\-Message(\$content); ```

If you want to get some specific parameter from the \hyperlink{class_telegram}{Telegram} response\-: ```php \$telegram = new \hyperlink{class_telegram}{Telegram}('Y\-O\-U\-R T\-E\-L\-E\-G\-R\-A\-M T\-O\-K\-E\-N H\-E\-R\-E');

\$result = \$telegram-\/$>$get\-Data(); \$text = \$result\mbox{[}'message'\mbox{]} \mbox{[}'text'\mbox{]}; \$chat\-\_\-id = \$result\mbox{[}'message'\mbox{]} \mbox{[}'chat'\mbox{]}\mbox{[}'id'\mbox{]}; \$content = array('chat\-\_\-id' =$>$ \$chat\-\_\-id, 'text' =$>$ 'Test'); \$telegram-\/$>$send\-Message(\$content); ```

To upload a Photo or some other files, you need to load it with Curl\-File\-: ```php // Load a local file to upload. If is already on \hyperlink{class_telegram}{Telegram}'s Servers just pass the resource id \$img = curl\-\_\-file\-\_\-create('test.\-png','image/png'); \$content = array('chat\-\_\-id' =$>$ \$chat\-\_\-id, 'photo' =$>$ \$img ); \$telegram-\/$>$send\-Photo(\$content); ```

To download a file on the \hyperlink{class_telegram}{Telegram}'s servers ```php \$file = \$telegram-\/$>$get\-File(\$file\-\_\-id); \$telegram-\/$>$download\-File(\$file\mbox{[}'result'\mbox{]}\mbox{[}'file\-\_\-path'\mbox{]}, './my\-\_\-downloaded\-\_\-file\-\_\-on\-\_\-local\-\_\-server.png'); ```

See update.\-php or update cowsay.\-php for the complete example. If you wanna see the Cow\-Say Bot in action \href{https://telegram.me/cowmooobot}{\tt add it}.

If you want to use get\-Updates instead of the Web\-Hook you need to call the the {\ttfamily serve\-Update} function inside a for cycle. ```php \$telegram = new \hyperlink{class_telegram}{Telegram}('Y\-O\-U\-R T\-E\-L\-E\-G\-R\-A\-M T\-O\-K\-E\-N H\-E\-R\-E');

\$req = \$telegram-\/$>$get\-Updates();

for (\$i = 0; \$i $<$ \$telegram-\/$>$ Update\-Count(); \$i++) \{ // You N\-E\-E\-D to call serve\-Update before accessing the values of message in \hyperlink{class_telegram}{Telegram} Class \$telegram-\/$>$serve\-Update(\$i); \$text = \$telegram-\/$>$Text(); \$chat\-\_\-id = \$telegram-\/$>$Chat\-I\-D();

if (\$text == '/start') \{ \$reply = 'Working'; \$content = array('chat\-\_\-id' =$>$ \$chat\-\_\-id, 'text' =$>$ \$reply); \$telegram-\/$>$send\-Message(\$content); \} // D\-O O\-T\-H\-E\-R S\-T\-U\-F\-F \} ``` See get\-Updates.\-php for the complete example.

\subsection*{Functions }

For a complete and up-\/to-\/date functions documentation check \href{http://eleirbag89.github.io/TelegramBotPHP/}{\tt http\-://eleirbag89.\-github.\-io/\-Telegram\-Bot\-P\-H\-P/}

\subsection*{Build keyboards }

\hyperlink{class_telegram}{Telegram}'s bots can have two different kind of keyboards\-: Inline and Reply. The Inline\-Keyboard is linked to a particular message, while the Reply\-Keyboard is linked to the whole chat. They are both an array of array of buttons, which rapresent the rows and columns. For instance you can arrange a Reply\-Keyboard like this\-:  using this code\-: ```php \$option = array( //\-First row array(\$telegram-\/$>$build\-Keyboard\-Button(\char`\"{}\-Button 1\char`\"{}), \$telegram-\/$>$build\-Keyboard\-Button(\char`\"{}\-Button 2\char`\"{})), //\-Second row array(\$telegram-\/$>$build\-Keyboard\-Button(\char`\"{}\-Button 3\char`\"{}), \$telegram-\/$>$build\-Keyboard\-Button(\char`\"{}\-Button 4\char`\"{}), \$telegram-\/$>$build\-Keyboard\-Button(\char`\"{}\-Button 5\char`\"{})), //\-Third row array(\$telegram-\/$>$build\-Keyboard\-Button(\char`\"{}\-Button 6\char`\"{})) ); \$keyb = \$telegram-\/$>$build\-Key\-Board(\$option, \$onetime=false); \$content = array('chat\-\_\-id' =$>$ \$chat\-\_\-id, 'reply\-\_\-markup' =$>$ \$keyb, 'text' =$>$ \char`\"{}\-This is a Keyboard Test\char`\"{}); \$telegram-\/$>$send\-Message(\$content); ``` When a user click on the button, the button text is send back to the bot. For an Inline\-Keyboard it's pretty much the same (but you need to provide a valid U\-R\-L or a Callback data)  ```php \$option = array( //\-First row array(\$telegram-\/$>$build\-Inline\-Key\-Board\-Button(\char`\"{}\-Button 1\char`\"{}, \$url=\char`\"{}http\-://link1.\-com\char`\"{}), \$telegram-\/$>$build\-Inline\-Key\-Board\-Button(\char`\"{}\-Button 2\char`\"{}, \$url=\char`\"{}http\-://link2.\-com\char`\"{})), //\-Second row array(\$telegram-\/$>$build\-Inline\-Key\-Board\-Button(\char`\"{}\-Button 3\char`\"{}, \$url=\char`\"{}http\-://link3.\-com\char`\"{}), \$telegram-\/$>$build\-Inline\-Key\-Board\-Button(\char`\"{}\-Button 4\char`\"{}, \$url=\char`\"{}http\-://link4.\-com\char`\"{}), \$telegram-\/$>$build\-Inline\-Key\-Board\-Button(\char`\"{}\-Button 5\char`\"{}, \$url=\char`\"{}http\-://link5.\-com\char`\"{})), //\-Third row array(\$telegram-\/$>$build\-Inline\-Key\-Board\-Button(\char`\"{}\-Button 6\char`\"{}, \$url=\char`\"{}http\-://link6.\-com\char`\"{})) ); \$keyb = \$telegram-\/$>$build\-Inline\-Key\-Board(\$option); \$content = array('chat\-\_\-id' =$>$ \$chat\-\_\-id, 'reply\-\_\-markup' =$>$ \$keyb, 'text' =$>$ \char`\"{}\-This is a Keyboard Test\char`\"{}); \$telegram-\/$>$send\-Message(\$content); ``` This is the list of all the helper functions to make keyboards easily\-:

```php build\-Key\-Board(array \$options, \$onetime=true, \$resize=true, \$selective=true) ``` Send a custom keyboard. \$option is an array of array Keyboard\-Button. Check \href{https://core.telegram.org/bots/api#replykeyboardmarkup}{\tt Reply\-Key\-Board\-Mark\-Up} for more info.

```php build\-Inline\-Key\-Board(array \$inline\-\_\-keyboard) ``` Send a custom keyboard. \$inline\-\_\-keyboard is an array of array Inline\-Keyboard\-Button. Check \href{https://core.telegram.org/bots/api#inlinekeyboardmarkup}{\tt Inline\-Keyboard\-Markup} for more info.

```php build\-Inline\-Key\-Board\-Button(\$text, \$url, \$callback\-\_\-data, \$switch\-\_\-inline\-\_\-query) ``` Create an Inline\-Keyboard\-Button. Check \href{https://core.telegram.org/bots/api#inlinekeyboardbutton}{\tt Inline\-Key\-Board\-Button} for more info.

```php build\-Key\-Board\-Button(\$text, \$url, \$request\-\_\-contact, \$request\-\_\-location) ``` Create a Keyboard\-Button. Check \href{https://core.telegram.org/bots/api#keyboardbutton}{\tt Key\-Board\-Button} for more info.

```php build\-Key\-Board\-Hide(\$selective=true) ``` Hide a custom keyboard. Check \href{https://core.telegram.org/bots/api#replykeyboardhide}{\tt Reply\-Key\-Boar\-Hide} for more info.

```php build\-Force\-Reply(\$selective=true) ``` Show a Reply interface to the user. Check \href{https://core.telegram.org/bots/api#forcereply}{\tt Force\-Reply} for more info.

\subsection*{List of Bots using the library }

Let me know using this \href{https://github.com/Eleirbag89/TelegramBotPHP/issues/80}{\tt Issue} if you have made a bot using this A\-P\-I, I will add it to this section.
\begin{DoxyItemize}
\item \href{https://t.me/iHarfBot}{\tt i\-Harf\-Bot} -\/ Lang\-: Persian/\-Farsi
\item \href{https://t.me/AsansorBot}{\tt Asansor\-Bot} -\/ Lang\-: Persian/\-Farsi
\item \href{https://t.me/IDPbot}{\tt I\-D\-Pbot} -\/ Lang\-: Persian/\-Farsi (Down as 14/10/2019)
\item \href{https://telegram.me/EvilInsultGeneratorBot}{\tt Evil Insult Generator} -\/ Lang English/\-German
\item \href{https://telegram.me/ibelitbot}{\tt ibelitbot} -\/\-Lang Persian (Down as 14/10/2019)
\item \href{https://telegram.me/apollbot}{\tt Advanced Pools Bot} -\/ Lang Italian/\-English(\href{https://poeditor.com/join/project/NMAUjrAZ5f}{\tt Contribute})
\item \href{https://telegram.me/Btn_Bot}{\tt Btn\-\_\-\-Bot} -\/ Lang pt-\/\-B\-R -\/ Cria botões transparente para publicações.
\item \href{https://telegram.me/DiffSGLaPuntabot}{\tt Diff\-S\-G\-La\-Puntabot} \href{https://telegram.me/DiffGravinaCTbot}{\tt Diff\-Gravina\-C\-Tbot} \href{https://t.me/DiffAdranobot}{\tt Diff\-Adranobot} -\/ Lang\-: it/\-Italian -\/ Bots to handle Recycling in San Giovanni La Punta, Gravina and Adrano (Open\-Source Template \href{https://github.com/Gualty/BOTDifferenziata}{\tt https\-://github.\-com/\-Gualty/\-B\-O\-T\-Differenziata})
\item \href{https://t.me/CoReYe_PGO_bot}{\tt Go\-Bot}
\item \href{https://t.me/CoReYe_PGO_Raid_bot}{\tt Raid\-Bot}
\end{DoxyItemize}

\subsection*{Emoticons }

For a list of emoticons to use in your bot messages, please refer to the column Bytes of this table\-: \href{http://apps.timwhitlock.info/emoji/tables/unicode}{\tt http\-://apps.\-timwhitlock.\-info/emoji/tables/unicode}

\subsection*{License }

This open-\/source software is distributed under the M\-I\-T License. See L\-I\-C\-E\-N\-S\-E.\-md

\subsection*{Contributing }

All kinds of contributions are welcome -\/ code, tests, documentation, bug reports, new features, etc...


\begin{DoxyItemize}
\item Send feedbacks.
\item Submit bug reports.
\item Write/\-Edit the documents.
\item Fix bugs or add new features.
\end{DoxyItemize}

\subsection*{Contact me }

You can contact me \href{https://telegram.me/ggrillo}{\tt via Telegram} but if you have an issue please \href{https://github.com/Eleirbag89/TelegramBotPHP/issues}{\tt open} one.

\subsection*{Support me }

You can buy me a beer or two using \href{https://paypal.me/eleirbag89}{\tt Paypal} or support me using Flattr.

\href{https://flattr.com/submit/auto?user_id=eleirbag89&url=https://github.com/Eleirbag89/TelegramBotPHP&title=TelegramBotPHP&language=&tags=github&category=software}{\tt !\mbox{[}Flattr this git repo\mbox{]}(http\-://api.\-flattr.\-com/button/flattr-\/badge-\/large.\-png)} 